"use strict";var gameEngine={ele:null,allBullets:[],allEnemys:[],totalScore:0,init:function(){return this.ele=document.getElementById("main"),this},start:function(){console.log("开始游戏"),this.loadding(function(){console.log("正式开始游戏"),myPlane.init().move(),gameEngine.listenKeybord(),myPlane.fireBullet(),gameEngine.createEnemy(),gameEngine.crash(),gameEngine.movebackground()})},loadding:function(e){console.log("开始加载游戏");var n=document.createElement("div");this.ele.appendChild(n),n.className="logo";var l=document.createElement("div");this.ele.appendChild(l),l.className="load";var t=1,a=setInterval(function(){++t>=8?(clearInterval(a),gameEngine.ele.removeChild(n),gameEngine.ele.removeChild(l),e()):l.style.background="url(images2/loading"+t%4+".png) no-repeat"},300)},listenKeybord:function(){var e=0,n=0;onkeydown=function(l){37==(l=l||event).keyCode?e=-10:38==l.keyCode?n=-10:39==l.keyCode?e=10:40==l.keyCode&&(n=10)},onkeyup=function(l){37==(l=l||event).keyCode||39==l.keyCode?e=0:38!=l.keyCode&&40!=l.keyCode||(n=0)},setInterval(function(){var l=myPlane.ele.offsetLeft+e;l<0&&(l=0),l>gameEngine.ele.offsetWidth-myPlane.ele.offsetWidth&&(l=gameEngine.ele.offsetWidth-myPlane.ele.offsetWidth),myPlane.ele.style.left=l+"px",myPlane.ele.style.top=myPlane.ele.offsetTop+n+"px"},30)},createEnemy:function(){setInterval(function(){if(Math.random()>.5){new Enemy(3).init().move()}},6e3),setInterval(function(){if(Math.random()>.4){new Enemy(2).init().move()}},3e3),setInterval(function(){if(Math.random()>.3){new Enemy(1).init().move()}},1e3)},crash:function(){setInterval(function(){for(var e=0;e<gameEngine.allEnemys.length;e++){for(var n=0;n<gameEngine.allBullets.length;n++)isCrash(gameEngine.allEnemys[e].ele,gameEngine.allBullets[n].ele)&&(gameEngine.allBullets[n].boom(),gameEngine.allBullets.splice(n,1),gameEngine.allEnemys[e].hurt());if(isCrash(gameEngine.allEnemys[e].ele,myPlane.ele)){myPlane.boom(function(){var e=prompt("请留下您的大名，您的当前分数是："+gameEngine.totalScore,"");console.log(gameEngine.totalScore),ajax({type:"post",url:"http://60.205.181.47/myPHPCode4/uploadScore.php",data:{name:e,score:gameEngine.totalScore},success:function(e){console.log("提交成功: "+e),location.href="rand.html"}})});break}}},20)},movebackground:function(){var e=0;setInterval(function(){gameEngine.ele.style.backgroundPositionY=e+++"px"},30)}};